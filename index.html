<!doctype>
<html>

<head>
    <title>abi2html</title>
    <link rel="stylesheet" href="index.css">
    <script type="text/javascript" src="./dist/bignumber.min.js"></script>
    <script type="text/javascript" src="./dist/web3-light.js"></script>
    <script type="text/javascript" src="./abiHtml.js"></script>
    <script type="text/javascript" src="./abiReader.js"></script>
    <script type="text/javascript">
    //initalize web3
    var web3 = require('web3');
    web3.setProvider(new web3.providers.HttpProvider('http://127.0.0.1:8545'));
    // set global events
    window.onload = function() {
        // set event handlers
        document.getElementById('reload_page').addEventListener('click', function() {
            reload();
        }, false);
        document.getElementById('send_value').addEventListener('click', sendValue, false);
        document.getElementById('sender_address').addEventListener('change', function() {
            renderAccountBalance('sender_balance', getBalance(getSenderAddress()))
        }, false);
        document.getElementById('gas_price_unit').addEventListener('change', function() {
            renderGasPriceEstimate(networkGasPrice)
        }, false);
        // debug default
        document.getElementById('contract_address').value = '0x0deac8513c7e260310d42c90400fa965c5412cad';

        // we set as global here because some functions need to be cleaned up
        abi = getAbi();
        main(abi, true);
    }

    window.onbeforeunload = function() {
        // unlikely this fires, but try to clean up after oneself
        unset();
    }
    </script>
</head>

<body>
    <div id="head">
        <p>
            <button id="reload_page" type="button">Reload</button>
            <samp>geth --rpc --rpcaddr "127.0.0.1" --rpcport "8545" --rpccorsdomain "*" --unlock "&lt;ACCOUNT1&gt; &lt;ACCOUNT2&gt; &lt;ACCOUNT3&gt;"</samp>
        </p>
        <div id="local">
            <label for="sender_address">From:</label>
            <select id="sender_address" class="in_address"></select>
            <br> Account balance: <span id="sender_balance">0</span>
        </div>
        <div id="net">
            <label for="gas">Gas:</label>
            <input id="gas" type="text" class="" value="3000000">
            <br>
            <label for="gas_price">Gas price:</label>
            <input id="gas_price" type="text" class="" value="10">
            <select id="gas_price_unit">
                <option>ether</option>
                <option>finney</option>
                <option selected>szabo</option>
                <option>shannon</option>
                <option>babbage</option>
                <option>ada</option>
                <option>wei</option>
            </select>
            <br>
            <em>Estimated from network</em>
            <br>
            <label for="ether_amt">&#926;</label>
            <input id="ether_amt" type="text" value="0">
            <br>
            <em>account must be unlocked!</em>
            <button id="send_value" type="button">Send</button>
        </div>
        <div id="remote">
            <label for="contract_address">Contract address:</label>
            <input id="contract_address" type="text" class="in_address">
            <br>
            <label for="contract_balance">Balance:</label>
            <span id="contract_balance"></span>
            <br> Contract ABI:
            <br>
            <textarea id="contract_abi">[{
    "constant": false,
    "inputs": [],
    "name": "isTrue",
    "outputs": [{
        "name": "",
        "type": "bool"
    }],
    "type": "function"
}, {
    "constant": true,
    "inputs": [{
        "name": "addr",
        "type": "address"
    }],
    "name": "queryBalance",
    "outputs": [{
        "name": "balance",
        "type": "uint256"
    }],
    "type": "function"
}, {
    "constant": false,
    "inputs": [{
        "name": "owner",
        "type": "address"
    }, {
        "name": "amount",
        "type": "uint256"
    }],
    "name": "mint",
    "outputs": [],
    "type": "function"
}, {
    "constant": false,
    "inputs": [{
        "name": "receiver",
        "type": "address"
    }, {
        "name": "amount",
        "type": "uint256"
    }],
    "name": "send",
    "outputs": [],
    "type": "function"
}, {
    "inputs": [],
    "type": "constructor"
}, {
    "anonymous": false,
    "inputs": [{
        "indexed": false,
        "name": "from",
        "type": "address"
    }, {
        "indexed": false,
        "name": "to",
        "type": "address"
    }, {
        "indexed": false,
        "name": "value",
        "type": "uint256"
    }],
    "name": "Send",
    "type": "event"
}, {
    "anonymous": false,
    "inputs": [{
        "indexed": false,
        "name": "from",
        "type": "address"
    }, {
        "indexed": false,
        "name": "value",
        "type": "uint256"
    }],
    "name": "Deposit",
    "type": "event"
}]
</textarea>
        </div>
    </div>
    <div id="main">
        <div id="functions"></div>
        <div id="events"></div>
    </div>
    <div id="foot">
    </div>
</body>

</html>
