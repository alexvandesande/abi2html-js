<!doctype>
<html>

<head>
    <title>abi2html</title>
    <link rel="stylesheet" href="index.css">
    <script type="text/javascript" src="./dist/bignumber.min.js"></script>
    <script type="text/javascript" src="./dist/web3-light.js"></script>
    <script type="text/javascript" src="./abi2html.js"></script>
    <script type="text/javascript">
    // ABI output from Solidity compiler
    var abiString = '[{"constant":true,"inputs":[],"name":"m_dailyLimit","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_addr","type":"address"}],"name":"isOwner","outputs":[{"name":"","type":"bool"}],"type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"name":"oldOwner","type":"address"}],"name":"OwnerRemoved","type":"event"}]'

    // Settable properties to override default behavior
    var properties = {
        callFunction: function(v) {
            alert('custom call function!')
        },
        transactButtonText: 'DO NOT CLICK',
        outputFieldsetName: ''
    }

    // Helper function
    var render = function(element, items) {
        var el = document.getElementById(element);
        items.forEach(function(value) {
            el.appendChild(value)
        })

        // console.log(el.innerHTML)
    }

    window.onload = function() {
        // Instantiate library with abi and optional properties
        var abihtml = new AbiHtml(abiString, properties);
        // Generate DOM
        var doc = abihtml.generateDocument();
        // Render functions as a form
        render('functions', doc.functions);

        // Render events as popups
        // watchEvents(
        render('events', doc.events);
        // )
    }
    </script>
</head>

<body>
    <div id="wrapper">
        <div id="head">
            &nbsp;
        </div>
        <div id="top">
            &nbsp;
        </div>
        <div id="bottom">
            <div id="main">
                <div id="functions"></div>
            </div>
            <div id="status">
                <div id="events"></div>
            </div>
        </div>
        <div id="foot">
        </div>
    </div>
</body>

</html>
